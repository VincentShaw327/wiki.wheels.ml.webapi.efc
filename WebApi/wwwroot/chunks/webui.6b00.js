webpackJsonp([4],{1341:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelUIItemEdit=t.togUIItemEdit=t.toggleCheckedUI=t.uiDelete=t.uiAdd=t.uiUpdate=t.uiList=t.recevieUIList=t.requestUIList=void 0;var l=a(51),u=a(76),i=a(342),r=t.requestUIList=(0,l.createAction)("request ui list"),n=t.recevieUIList=(0,l.createAction)("receive ui list");t.uiList=(0,u.createAjaxAction)(i.apimodule.ui,r,n),t.uiUpdate=(0,u.createAjaxAction)(i.apimodule.ui,null,(0,l.createAction)("success update ui")),t.uiAdd=(0,u.createAjaxAction)(i.apimodule.ui,null,(0,l.createAction)("success add ui ")),t.uiDelete=(0,u.createAjaxAction)(i.apimodule.ui,null,(0,l.createAction)("success delete ui ")),t.toggleCheckedUI=(0,l.createAction)("toggle checked ui"),t.togUIItemEdit=(0,l.createAction)("toggle ui item edit state"),t.cancelUIItemEdit=(0,l.createAction)("cancel ui item edit state")},828:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,i,r,n=a(337),d=l(n),s=a(9),o=l(s),c=a(838),f=l(c),I=a(845),m=l(I),U=a(136),p=l(U),g=a(863),v=l(g),h=a(864),E=l(h),k=a(345),A=l(k),y=a(109),x=l(y),w=a(209),S=l(w),b=a(93),D=l(b),C=a(3),q=l(C),_=a(13),j=l(_),M=a(4),N=l(M),O=a(5),F=l(O),L=a(837),P=l(L);a(338),a(836),a(854),a(200),a(867),a(868),a(353),a(110),a(839);var R=a(869),V=(l(R),a(1)),T=l(V),z=a(74),B=a(1341),J=a(139);a(856);var K=P.default.Item,Y=(u=P.default.create({}),i=(0,z.connect)(function(e,t){return{UI:e.UI}}),u(r=i(r=function(e){function t(e){(0,q.default)(this,t);var a=(0,N.default)(this,(t.__proto__||(0,D.default)(t)).call(this,e));return a.add=function(e){var t=(a.state.editItem,(0,S.default)(e,{nUIFlag:1,strUINote:"",uParentObjectUUID:0})),l={op:"add",reqdata:{data:J.fn_mes_trans.toCols(t)}};console.log("更新前的item",e,l),a.props.dispatch((0,B.uiAdd)(l,function(e){a.setState({showModal:!1}),x.default.success("添加成功!"),a.getUI()}))},a.update=function(e){var t=a.state.editItem;console.log("kaishi update",e);var l={op:"update",reqdata:{data:J.fn_mes_trans.toCols(e),cond:{equal:[{key:"uObjectUUID",val:t.uObjectUUID}],like:[]}}};console.log("更新前的item",t,l),a.props.dispatch((0,B.uiDelete)(l,function(e){a.setState({showModal:!1}),x.default.success("更新成功"),a.getUI()}))},a.delete=function(e){var t={op:"update",reqdata:{data:[{key:"nUIFlag",val:0}],cond:{equal:[{key:"uObjectUUID",val:e.uObjectUUID}],like:[]}}};console.log("要刪除的item",e,t),a.props.dispatch((0,B.uiDelete)(t,function(e){x.default.success("刪除成功"),a.getUI()}))},a.state={PageIndex:0,PageSize:-1,showModal:!1,editItem:{}},a}return(0,F.default)(t,e),(0,j.default)(t,[{key:"componentDidMount",value:function(){this.getUI()}},{key:"getUI",value:function(){var e={op:"list",reqdata:{PageIndex:0,PageSize:-1,cond:{equal:[{key:"nUIFlag",val:1}],like:[]}}};this.props.dispatch((0,B.uiList)(e,function(e){}))}},{key:"FormSubmit",value:function(e,t){var a=this,l=this.state.isAdd;this.props.form.validateFields(function(e,t){console.log("收到表单值：",t),e?(console.log("Errors in form!!!"),x.default.error("添加失败")):(l?a.add(t):a.update(t),a.setState({isAdd:!1}))}),this.props.form.resetFields()}},{key:"render",value:function(){var e=this,t=this.props,a=t.UI,l=t.form,u=a.list,i=l.getFieldDecorator,r=this.state.editItem,n=[{title:"strUIName",dataIndex:"strUIName",key:"name"},{title:"strUICode",dataIndex:"strUICode",key:"strUICode"},{title:"strUIRoute",key:"strUIRoute",dataIndex:"strUIRoute"},{title:"strUISource",key:"strUISource",dataIndex:"strUISource"},{title:"strUIDesc",key:"strUIDesc",dataIndex:"strUIDesc",width:150,render:function(e){return T.default.createElement(A.default,{placement:"topRight",title:e},T.default.createElement("div",{style:{whiteSpace:"nowrap",width:150,textOverflow:"ellipsis",overflow:"hidden"}},e))}},{title:"strUINote",key:"strUINote",dataIndex:"strUINote"},{title:"Action",key:"action",render:function(t,a){return T.default.createElement("span",null,T.default.createElement("a",{onKeyDown:function(){return""},onClick:function(){return e.setState({editItem:a,showModal:!0,isAdd:!1})}},"更新"),T.default.createElement(E.default,{type:"vertical"}),T.default.createElement(v.default,{placement:"topLeft",title:"确定删除此项吗?",onConfirm:function(){return e.delete(a)},okText:"Yes",cancelText:"No"},T.default.createElement("a",null,"删除")))}}],s={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}};return T.default.createElement("div",{className:"page"},T.default.createElement("div",{style:{width:"100%",padding:"25px 35px"}},T.default.createElement(p.default,{type:"primary",style:{marginBottom:18},onClick:function(){return e.setState({showModal:!0,isAdd:!0,editItem:{}})}},"添加"),T.default.createElement(m.default,{columns:n,dataSource:u})),T.default.createElement(d.default,{title:"添加",visible:this.state.showModal,onOk:function(t,a){return e.FormSubmit(t,a)},onCancel:function(){return e.setState({showModal:!1})}},T.default.createElement(P.default,null,T.default.createElement(K,(0,o.default)({},s,{label:"UI名称"}),i("strUIName",{rules:[{required:!0,message:"请输入字段！"}],initialValue:r.strUIName})(T.default.createElement(f.default,null))),T.default.createElement(K,(0,o.default)({},s,{label:"UI编码"}),i("strUICode",{rules:[{required:!0,message:"请输入名称"}],initialValue:r.strUICode})(T.default.createElement(f.default,null))),T.default.createElement(K,(0,o.default)({},s,{label:"路由"}),i("strUIRoute",{rules:[{required:!0,message:"请输入名称"}],initialValue:r.strUIRoute})(T.default.createElement(f.default,null))),T.default.createElement(K,(0,o.default)({},s,{label:"strUISource"}),i("strUISource",{rules:[{required:!0,message:"请输入名称"}],initialValue:r.strUISource})(T.default.createElement(f.default,null))),T.default.createElement(K,(0,o.default)({},s,{label:"备注"}),i("strUIDesc",{rules:[{required:!0,message:"请输入名称"}],initialValue:r.strUIDesc})(T.default.createElement(f.default.TextArea,{rows:8}))))))}}]),t}(V.Component))||r)||r);t.default=Y}});